/** * Created by Administrator on 2017/7/24. * * 沃特玛 项目页面启动 *///程序启动$(function () {    var nMapHeight = $(window).height();    var nMapWidth = $(window).width() - 340;    // 页面通信参数    var oPage = new ES.MapView.Page('MapView', {});    // 菜单    var oMenu = new ES.MapView.Menu(oPage, {});    // 容器内容布局    var oLayoutContent = new ES.MapView.LayoutContent(oPage, { nWidth: nMapWidth, nHeight: nMapHeight });    // 地图布局    var oMapLayout = new ES.MapControl.Layout(oPage, { cDidId: 'MapView' });    // 初始化地图控件    var oMapMaster = new L.MapLib.MapMaster.Map(oPage, {        cDidId: 'MapView',        oMapOption: {            zoomControl: false,            layers: [],            center: new L.LatLng(22.550611, 114.055595),            zoom: 13,            attribution: '&copy; <a href="http://www.exsun.cn">依迅Exsun</a>'        },        nMapWidth: nMapWidth,        nMapHeight: nMapHeight    });    // 加载地图    oMapMaster.loadMapMaster();    // 监听 改变 左边结构的宽度 的事件    oPage.on('MapView:LayoutContent.resize', function (oData) {        // 更改地图的 宽度        oMapMaster.reflesh($(window).width() - oData.nWidth - 120);    });    // 区域中心点    new ES.MapControl.ESMapToolArea(oMapMaster, {        acParentDivClass: [            'ex-layout-maptool',            'ex-theme-maptool',            'ex-map-top',            'ex-map-right'        ],        cUrl: ES.HGT.oConfig.cPoiUrl,        oUIConfig: {            div: {                'class': 'ex-maptool-box ex-control-dropmenu',                i: {'class': 'ec-icon-map-marker'},                html: '&nbsp;&nbsp;区域：',                span: {html: '深圳'},                i11: {'class': 'ec-icon-angle-down'},                ul: {                    'class': 'ec-avg-sm-2 ec-dropdown-content',                }            }        }});    // 工具条    new ES.MapControl.ESMapToolBox(oMapMaster, {        acParentDivClass: [            'ex-layout-maptool',            'ex-theme-maptool',            'ex-map-top',            'ex-map-right'        ]}        );    // 地图瓦片    new ES.MapControl.ESMapTile(oMapMaster, {        acParentDivClass: [            'ex-layout-maptool',            'ex-theme-maptool',            'ex-map-top',            'ex-map-right'        ]    });    // 全屏显示    new ES.MapControl.ESMapFull(oMapMaster, { });    new ES.MapView.LiveMange(oPage,{});    // 界面改变是 出发的事件    $(window).resize(function () {        var nHeight = $(window).height();        var nWidth = $(window).width() - 340;        oMapMaster.reflesh(nWidth, nHeight);        oLayoutContent.reflesh(nWidth, nHeight);        // 广播消息        //oPage.fire('window:resize');    });});